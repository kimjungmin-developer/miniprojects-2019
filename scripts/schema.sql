CREATE TABLE IF NOT EXISTS user(
	id BIGINT AUTO_INCREMENT,
	user_name VARCHAR(255) NOT NULL,
	email VARCHAR(255) NOT NULL UNIQUE,
	password VARCHAR(255) NOT NULL,
	is_deleted BOOLEAN NOT NULL DEFAULT FALSE,
	create_date DATETIME DEFAULT CURRENT_TIMESTAMP,
	update_date DATETIME DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY(id)
);

CREATE TABLE IF NOT EXISTS video(
	id BIGINT AUTO_INCREMENT,
	youtube_id VARCHAR(255) NOT NULL,
	title VARCHAR(100) NOT NULL,
	contents TEXT NOT NULL,
	view_count INTEGER NOT NULL DEFAULT 0,
	is_deleted BOOLEAN NOT NULL DEFAULT FALSE,
	creator_id BIGINT NOT NULL,
	create_date DATETIME DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY(id),
	FOREIGN KEY(creator_id) REFERENCES user(id)
);

CREATE TABLE IF NOT EXISTS comment(
	id BIGINT AUTO_INCREMENT,
	contents TEXT NOT NULL,
	create_date DATETIME DEFAULT CURRENT_TIMESTAMP,
	update_date DATETIME DEFAULT CURRENT_TIMESTAMP,
	author_id BIGINT NOT NULL,
	video_id BIGINT NOT NULL,
	PRIMARY KEY(id),
	FOREIGN KEY(author_id) REFERENCES user(id),
	FOREIGN KEY(video_id) REFERENCES video(id)
);

CREATE TABLE IF NOT EXISTS subscription(
	id BIGINT AUTO_INCREMENT,
	subscribed_id BIGINT NOT NULL,
	subscriber_id BIGINT NOT NULL,
	PRIMARY KEY(id),
	FOREIGN KEY(subscribed_id) REFERENCES user(id),
	FOREIGN KEY(subscriber_id) REFERENCES user(id)
);
